<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>The Pot Game</title>

    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">

    <link rel="stylesheet" href="../css/styles.css">

</head>

<body>
    <nav class="navbar navbar-inverse navbar-fixed-top">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="#">The Pot</a>
            </div>
            <div id="navbar" class="collapse navbar-collapse">
                <ul class="nav navbar-nav">
                    <li class="active"><a href="#">Home</a></li>
                    <li><a href="#about">About</a></li>
                    <li><a href="#rules">The Rules</a></li>
                    <li><a href="#contact">Contact</a></li>
                </ul>
            </div>
            <!--/.nav-collapse -->
        </div>
    </nav>

    <div class="container">
        <div class="page-header">
            <h1>Group Definition</h1>
        </div>
        <div class="Group1">
            <h2>Group 1</h2>
            <form class="form-inline">
                <div class="form-group">
                    <label for="group1name">Name:</label>
                    <input type="text" class="form-control" id="group1Name" value="Group 1">
                </div>
            </form>
            <label for="group1-members">Number of members:</label>
            <label class="radio-inline">
                <input type="radio" name="group1Members" id="g1members2" value="2" checked> 2
            </label>
            <label class="radio-inline">
                <input type="radio" name="group1Members" id="g1members3" value="3"> 3
            </label>
            <label class="radio-inline">
                <input type="radio" name="group1Members" id="g1members4" value="4"> 4
            </label>
            <label class="radio-inline">
                <input type="radio" name="group1Members" id="g1members5" value="5"> 5
            </label>
            <label class="radio-inline">
                <input type="radio" name="group1Members" id="g1members6" value="6"> 6
            </label>
            <label class="radio-inline">
                <input type="radio" name="group1Members" id="g1members7" value="7"> 7
            </label>
            <label class="radio-inline">
                <input type="radio" name="group1Members" id="g1members8" value="8"> 8
            </label>
            <label class="radio-inline">
                <input type="radio" name="group1Members" id="g1members9" value="9"> 9
            </label>
            <!-- Se inserta inputs para nombre de miembros -->
            <form class="form-inline" id="group1-name-form"></form>
        </div>

        <div class="Group2">
            <h2>Group 2</h2>
            <form class="form-inline">
                <div class="form-group">
                    <label for="group2name">Name:</label>
                    <input type="text" class="form-control" id="group2Name" value="Group 2">
                </div>
            </form>
            <label for="group2-members">Number of members:</label>
            <label class="radio-inline">
                <input type="radio" name="group2Members" id="g2members2" value="2" checked> 2
            </label>
            <label class="radio-inline">
                <input type="radio" name="group2Members" id="g2members3" value="3"> 3
            </label>
            <label class="radio-inline">
                <input type="radio" name="group2Members" id="g2members4" value="4"> 4
            </label>
            <label class="radio-inline">
                <input type="radio" name="group2Members" id="g2members5" value="5"> 5
            </label>
            <label class="radio-inline">
                <input type="radio" name="group2Members" id="g2members6" value="6"> 6
            </label>
            <label class="radio-inline">
                <input type="radio" name="group2Members" id="g2members7" value="7"> 7
            </label>
            <label class="radio-inline">
                <input type="radio" name="group2Members" id="g2members8" value="8"> 8
            </label>
            <label class="radio-inline">
                <input type="radio" name="group2Members" id="g2members9" value="9"> 9
            </label>
            <form class="form-inline" id="group2-name-form"></form>
        </div>

    </div>

    <div class="container">
        <hr>
        <form class="form-inline">
            <div class="form-group">
                <label for="wordsPerMember">Words per Member:</label>
                <input type="text" class="form-control" id="wordsPerMemberInput" value="10">
            </div>
        </form>
        <form class="form-inline">
            <div class="form-group">
                <label for="timePerTurn">Time per Turn [s]:</label>
                <input type="text" class="form-control" id="timePerTurnInput" value="30">
            </div>
        </form>
    </div>

    <div class="container">

        <div class="starter-template">
            <a class="btn btn-lg btn-success" href=title.html role="button">Back</a>
            <a class="btn btn-lg btn-primary" href=wordChoosing.html id="wordChoosing" role="button">Next</a>
        </div>
    </div>

    <!-- Se compilan scripts -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../js/formGenerator.js"></script>

    <!-- Set variables script -->
    <script>
        // Activa las funciones generadoras de formas

        $('input[name=group1Members]').on('change', function() {
            $('#group1-name-form')
                .empty()
                .append(generateNameForm(1, $('input[name=group1Members]:checked').val()));
        });
        $('input[name=group2Members]').on('change', function() {
            $('#group2-name-form')
                .empty()
                .append(generateNameForm(2, $('input[name=group2Members]:checked').val()));
        });

        $('input[name=group3Members]').on('change', function() {
            $('#group3-name-form')
                .empty()
                .append(generateNameForm(3, $('input[name=group3Members]:checked').val()));
        });

        // TODO: If I put a name, then change the number of members, the name
        // resets to default. Not the best behavior.
        $('input[name=group1Members]').trigger('change');
        $('input[name=group2Members]').trigger('change');
        // Wait for the page to load first
        $(function() {
            $('#wordChoosing').on('click', function() {
                var group1Name = $('#group1Name').val();
                var group2Name = $('#group2Name').val();
                var group1Members = $('input[name=group1Members]:checked').val();
                var group2Members = $('input[name=group2Members]:checked').val();
                var group1Names = {};
                $.each($('[id^=group1Member]'), function(k, v) {
                    group1Names[k] = $(v).val();
                });
                var group2Names = {};
                $.each($('[id^=group2Member]'), function(k, v) {
                    group2Names[k] = $(v).val();
                });
                var wordsPerMember = $('#wordsPerMemberInput').val();
                var timePerTurn = $('#timePerTurnInput').val();
                var group1Names = JSON.stringify(group1Names);
                var group2Names = JSON.stringify(group2Names);
                var currentMember = 0;
                var currentGroup = 0;
                // Storing the data:
                localStorage.setItem('g1Name', group1Name);
                localStorage.setItem('g2Name', group2Name);
                localStorage.setItem('g1Members', group1Members);
                localStorage.setItem('g2Members', group2Members);
                localStorage.setItem('g1Names', group1Names);
                localStorage.setItem('g2Names', group2Names);
                localStorage.setItem('wordsPerMember', wordsPerMember);
                localStorage.setItem('timePerTurn', timePerTurn);
                localStorage.setItem('currentMember', currentMember);
                localStorage.setItem('currentGroup', currentGroup);
            })

        });

    </script>

</body>

</html>
